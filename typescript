currentShortage = Math.max(0, item.required - item.available) + minStockLevel;
